<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nunta Dianei și a lui Geo – Află masa ta</title>
  <!-- Open Graph / Social share -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Nunta Dianei și a lui Geo">
  <meta property="og:title" content="Nunta Dianei și a lui Geo – Află masa ta">
  <meta property="og:description" content="Căutați masa după nume, meniu, locație & program și trimiteți mesaje cu foto/video.">
  <meta property="og:url" content="https://arckdaemon.github.io/Mese-Nunta/index.html">
  <meta property="og:image" content="https://arckdaemon.github.io/Mese-Nunta/og-image.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Nunta Dianei și a lui Geo – Află masa ta">
  <meta name="twitter:description" content="Căutați masa după nume, meniu, locație & program și trimiteți mesaje cu foto/video.">
  <meta name="twitter:image" content="https://arckdaemon.github.io/Mese-Nunta/og-image.jpg">
  <link rel="canonical" href="https://arckdaemon.github.io/Mese-Nunta/index.html">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Dancing+Script:wght@600;700&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root { --bg:#0b0b0b; --card:#0f0f0f; --gold:#d4af37; --gold-2:#b8860b; --text:#ece7d9; --muted:#c8b892; --line:#2a2210; }
    *{box-sizing:border-box}
    body{ background:radial-gradient(1200px 600px at 50% -10%, #1a1a1a 0%, #000 60%), linear-gradient(135deg, #0b0b0b 0%, #000 100%); color:var(--text); font-family:'Montserrat',Arial,sans-serif; margin:0; padding:0; min-height:100vh; }
    .container{ max-width:600px; background:var(--card); margin:48px auto 40px; padding:32px 28px 36px; border-radius:2rem; border:1px solid rgba(212,175,55,.35); box-shadow:inset 0 0 0 1px rgba(212,175,55,.12), 0 12px 50px rgba(0,0,0,.55); position:relative; z-index:1 }
    .logo{ display:block; width:120px; height:auto; margin:0 auto 12px; border-radius:9999px; box-shadow:0 0 0 3px rgba(212,175,55,.12), 0 10px 30px rgba(0,0,0,.4) }
    .festive-title{ font-family:'Great Vibes',cursive; font-size:2.6rem; color:var(--gold); margin-bottom:.25em; text-align:center; letter-spacing:2px; text-shadow:0 0 12px rgba(212,175,55,.15) }
    .festive-title::after{ content:""; display:block; height:20px; margin:6px auto 0; background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 20"><path d="M5 10c30 0 30-8 60-8s30 8 60 8 30-8 60-8" stroke="%23d4af37" stroke-width="1.5" fill="none" stroke-linecap="round"/><circle cx="100" cy="10" r="2" fill="%23d4af37"/></svg>'); background-size:180px 20px; background-repeat:no-repeat; background-position:center; opacity:.95 }
    .subtitle{ font-family:'Dancing Script',cursive; font-size:1.35rem; color:var(--muted); text-align:center; margin-bottom:16px; font-weight:700; letter-spacing:.2px }
    .note{ color:#d9c9a3; font-size:.95rem; text-align:center; margin-bottom:18px; background:#111; border-radius:8px; padding:8px 12px; border:1px solid var(--line) }

    .actions{ display:grid; grid-template-columns:1fr; gap:10px; margin:8px 0 18px }
    @media (min-width:560px){ .actions{ grid-template-columns:1fr 1fr } }
    .action-btn{ display:inline-block; text-align:center; padding:12px 16px; border-radius:14px; background:linear-gradient(90deg, var(--gold) 0%, var(--gold-2) 100%); color:#0b0b0b; font-weight:700; text-decoration:none; border:none; cursor:pointer; box-shadow:0 8px 20px rgba(0,0,0,.35); transition:transform .15s, filter .2s; font-family:'Dancing Script',cursive; letter-spacing:.2px; font-size:1.2rem }
    .action-btn:hover{ transform:translateY(-1px); filter:brightness(1.05) }
    .action-btn.outline{ background:transparent; color:var(--gold); border:2px solid rgba(212,175,55,.6) }
    .reveal-box{ margin-top:6px; padding:10px 12px; background:#12100a; border:1px solid rgba(212,175,55,.35); color:var(--text); border-radius:12px; font-size:.98rem }

    input[type="text"]{ width:100%; padding:12px; border-radius:1rem; border:1px solid rgba(212,175,55,.35); background:#0b0b0b; color:var(--text); font-size:1.08rem; margin:8px 0 12px; outline:none; box-sizing:border-box; transition:border-color .2s, box-shadow .2s; font-family:'Montserrat',Arial,sans-serif }
    input[type="text"]:focus{ border-color:var(--gold); box-shadow:0 0 0 3px rgba(212,175,55,.15) }
    input[type="text"]::placeholder{ color:#9b8a5a }

    .results{ margin-top:10px }
    .result-row{ padding:10px 14px; margin:7px 0; background:#101010; border:1px solid rgba(212,175,55,.30); border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,.25); display:flex; justify-content:space-between; align-items:center; gap:8px; font-size:1.08rem }
    .guest-name{ color:#f0ead6; font-weight:700; font-family:'Dancing Script',cursive; font-size:1.15rem; letter-spacing:.1px; display:flex; align-items:center; gap:8px }
    .guest-table{ color:var(--gold); font-size:1.13rem; font-weight:700 }
    .no-result{ text-align:center; color:var(--gold); background:#15110a; border:1px solid rgba(212,175,55,.30); border-radius:9px; padding:9px; margin-top:14px }
    .count{ text-align:right; font-size:.9rem; color:#a89260; margin-top:6px }

    /* Badge NAȘ (prezidiu) + nume curcubeu animat */
    .badge-nas{ display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius:9999px; border:1px solid rgba(212,175,55,.55); background:#12100a; color:var(--gold); font:600 .78rem/1 'Montserrat',sans-serif; box-shadow:inset 0 0 0 1px rgba(212,175,55,.10) }
    .badge-nas .star{ width:12px; height:12px; display:inline-block; background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2l2.6 6.5L22 9.3l-5 4.3 1.6 6.4L12 16.9 5.4 20l1.6-6.4L2 9.3l7.4-.8L12 2z" fill="%23d4af37"/></svg>'); background-size:contain; background-repeat:no-repeat }
    .guest-name.godparent{ background:linear-gradient(90deg,#ff8a00,#e52e71,#8e2de2,#4a00e0,#00c6ff,#7ed957,#ff8a00); background-size:300% 100%; -webkit-background-clip:text; background-clip:text; color:transparent; animation:rainbowMove 6s linear infinite }
    @keyframes rainbowMove{ 0%{background-position:0% 50%} 100%{background-position:100% 50%} }

    /* Badge PĂRINTE + efect distinct (strălucire caldă) */
    .badge-parinte{ display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius:9999px; border:1px solid rgba(212,175,55,.45); background:#14110a; color:#e8d7a8; font:600 .78rem/1 'Montserrat',sans-serif; box-shadow:inset 0 0 0 1px rgba(212,175,55,.08) }
    .guest-name.parent{ position:relative; color:#f7edd4; text-shadow:0 0 6px rgba(212,175,55,.18) }
    .guest-name.parent::after{ content:""; position:absolute; left:0; right:0; bottom:-2px; height:2px; background:linear-gradient(90deg, rgba(212,175,55,.0), rgba(212,175,55,.9), rgba(212,175,55,.0)); filter:blur(.2px); animation:underlineGlow 2.2s ease-in-out infinite }
    @keyframes underlineGlow{ 0%,100%{opacity:.35} 50%{opacity:1} }

    /* Admin (dacă vei reactiva panelul) */
    details.admin{ margin-top:18px; background:#0d0d0d; border:1px dashed rgba(212,175,55,.6); border-radius:14px; padding:10px 12px }

    /* Floral bottom divider */
    .floral-divider{ height:24px; margin:18px auto 0; background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 24"><path d="M5 12c30 0 30-8 60-8s30 8 60 8 30-8 60-8" stroke="%23d4af37" stroke-width="1.5" fill="none" stroke-linecap="round"/><circle cx="110" cy="12" r="2" fill="%23d4af37"/></svg>'); background-size:200px 24px; background-repeat:no-repeat; background-position:center; opacity:.95 }
    .floral-divider.bottom{ margin-top:22px }

    /* Corner ornaments */
    .orn{ position:absolute; width:34px; height:34px; background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 22c6-6 6-12 12-12" stroke="%23d4af37" stroke-width="1.4" fill="none" stroke-linecap="round"/><path d="M10 10c3 0 4 1 4 4" stroke="%23d4af37" stroke-width="1.2" fill="none" stroke-linecap="round"/><path d="M6 18c2-2 4-2 6-4" stroke="%23d4af37" stroke-width="1.2" fill="none" stroke-linecap="round"/></svg>'); background-size:contain; background-repeat:no-repeat; opacity:.9; filter:drop-shadow(0 2px 6px rgba(0,0,0,.5)) }
    .corner-tl{ top:-10px; left:-10px }
    .corner-tr{ top:-10px; right:-10px; transform:scaleX(-1) }
    .corner-bl{ bottom:-10px; left:-10px; transform:scaleY(-1) }
    .corner-br{ bottom:-10px; right:-10px; transform:scale(-1,-1) }

    .couple-wrap{ margin:14px 0 18px }
    .slideshow{ position:relative; width:100%; aspect-ratio:3 / 2; max-height:420px; overflow:hidden; border-radius:16px; border:1px solid rgba(212,175,55,.55); box-shadow:0 10px 30px rgba(0,0,0,.45), inset 0 0 0 1px rgba(212,175,55,.12) }
    .slide{ position:absolute; inset:0; opacity:0; transition:opacity 1600ms ease-in-out; background:#0b0b0b; display:flex; align-items:center; justify-content:center }
    .slide.active{ opacity:1 }
    .slide img{ width:100%; height:100%; object-fit:contain; display:block }
    @keyframes kbZoom{ from{ transform:scale(1.02) } to{ transform:scale(1.08) } }
    .slide.active img{ animation:kbZoom 9s ease-in-out forwards }
    @media (prefers-reduced-motion:reduce){ .slide.active img{ animation:none !important } .slide{ transition:none } }

    #bg-wrap{ position:fixed; inset:0; z-index:0; overflow:hidden }
    #bgImage{ width:100%; height:100%; object-fit:cover; transform:scale(1.02); filter:brightness(.35) saturate(1.05) }
    #bg-wrap::after{ content:""; position:absolute; inset:0; background:radial-gradient(1200px 600px at 50% -10%, rgba(0,0,0,.15), rgba(0,0,0,.55)), linear-gradient(180deg, rgba(212,175,55,.08), rgba(0,0,0,0) 40%); pointer-events:none }

    .reveal-box a{ color:var(--gold); font-weight:700; text-decoration:none }
    .reveal-box a:hover{ text-decoration:underline }
    .reveal-box hr{ border:0; border-top:1px solid rgba(212,175,55,.28); margin:10px 0 }
    .reveal-box .time{ color:#d9c9a3 }
    .reveal-box .section-title{ color:var(--gold); margin-bottom:4px; font-family:'Dancing Script',cursive; font-weight:700; letter-spacing:.2px }
    .map-buttons{ display:flex; gap:8px; flex-wrap:wrap; margin:6px 0 6px }
    .mini-btn{ display:inline-block; padding:8px 12px; border-radius:10px; background:linear-gradient(90deg, var(--gold), var(--gold-2)); color:#0b0b0b; font-weight:700; text-decoration:none; border:none; box-shadow:0 6px 16px rgba(0,0,0,.35); font-family:'Dancing Script',cursive; letter-spacing:.2px; font-size:1.05rem }
    .mini-btn.outline{ background:transparent; color:var(--gold); border:2px solid rgba(212,175,55,.6) }
    .mini-btn.waze{ background:#33CCFF; color:#062a3b; border:none; display:inline-flex; align-items:center; gap:6px }
    .mini-btn .ico{ width:18px; height:18px; display:inline-block; vertical-align:-3px; filter:drop-shadow(0 1px 2px rgba(0,0,0,.25)) }

    /* Petals */
    #petals{ position:fixed; inset:0; z-index:3; pointer-events:none; overflow:hidden }
    .petal{ position:absolute; top:-12vh; width:18px; height:14px; background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 20"><path d="M12 0c4 2 7 6 7 9 0 4-3 7-7 7s-7-3-7-7c0-3 3-7 7-9z" fill="%23f6c6d8"/></svg>'); background-size:contain; background-repeat:no-repeat; opacity:.85; filter:drop-shadow(0 2px 4px rgba(0,0,0,.25)); animation:fall var(--dur) linear var(--delay) infinite, sway 6s ease-in-out infinite alternate }
    @keyframes fall{ to{ transform:translateY(115vh) rotate(360deg) } }
    @keyframes sway{ from{ margin-left:-18px } to{ margin-left:18px } }
    @media (prefers-reduced-motion:reduce){ #petals{ display:none } }

    .wedding-date{ font-family:'Great Vibes',cursive; font-size:1.9rem; color:var(--gold); text-align:center; margin:2px 0 8px; letter-spacing:.5px; text-shadow:0 0 10px rgba(212,175,55,.12) }

    .countdown{ font-family:'Great Vibes',cursive; font-size:1.7rem; color:var(--gold); text-align:center; margin-bottom:12px; letter-spacing:.5px; text-shadow:0 0 10px rgba(212,175,55,.12) }

    /* QUIZ preview box */
    .quiz-box{ margin-top:14px; padding:14px 12px; background:#111009; border:1px solid rgba(212,175,55,.35); border-radius:12px }
    .quiz-title{ margin:0 0 8px; font-family:'Dancing Script',cursive; font-weight:700; font-size:1.3rem; color:var(--gold) }
    .quiz-q{ margin:4px 0 10px; color:#e9dfc8 }
    .quiz-opt{ display:block; margin:6px 0; padding:8px 10px; border:1px solid rgba(212,175,55,.25); border-radius:10px }
    .quiz-opt input{ margin-right:6px; accent-color:#d4af37 }
    .quiz-actions{ display:flex; gap:8px; flex-wrap:wrap; margin-top:10px }

    /* Slideshow controls & dots (fix: keep arrows visible above slides) */
    .slideshow .slide{ z-index:1; }
    .slideshow .slide-nav{ position:absolute; top:50%; transform:translateY(-50%); padding:0; width:38px; height:46px; border-radius:12px; border:1px solid rgba(212,175,55,.45); background:rgba(0,0,0,.45); color:var(--gold); font-size:28px; line-height:1; display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:2; backdrop-filter:blur(2px); box-shadow:0 4px 14px rgba(0,0,0,.35); }
    .slideshow .slide-nav:hover{ background:rgba(0,0,0,.6); }
    .slideshow .slide-nav.prev{ left:8px; }
    .slideshow .slide-nav.next{ right:8px; }
    .slideshow .dots{ position:absolute; left:50%; transform:translateX(-50%); bottom:10px; display:flex; gap:6px; z-index:2; }
    .slideshow .dot{ width:9px; height:9px; border-radius:9999px; border:1px solid rgba(212,175,55,.5); background:rgba(0,0,0,.35); cursor:pointer; }
    .slideshow .dot.active{ background:var(--gold); border-color:var(--gold); }

    /* Guestbook */
    .guestbook{ margin-top:24px; padding:16px 14px 22px; background:#111009; border:1px solid rgba(212,175,55,.35); border-radius:12px; }
    .guest-title{ font-family:'Great Vibes',cursive; font-size:2rem; text-align:center; color:var(--gold); margin:0 0 12px; }
    #guestbookForm{ display:flex; flex-direction:column; gap:10px; }
    #guestbookForm input,#guestbookForm textarea{ font-family:'Dancing Script',cursive; font-size:1.1rem; background:#0b0b0b; color:var(--text); border:1px solid rgba(212,175,55,.35); border-radius:1rem; padding:10px 12px; }
    #guestbookForm textarea{ min-height:120px; resize:vertical; background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><g fill="%23b8860b" fill-opacity="0.25"><circle cx="20" cy="5" r="4"/><circle cx="20" cy="35" r="4"/><circle cx="5" cy="20" r="4"/><circle cx="35" cy="20" r="4"/><circle cx="10" cy="10" r="4"/><circle cx="30" cy="10" r="4"/><circle cx="10" cy="30" r="4"/><circle cx="30" cy="30" r="4"/><circle cx="20" cy="20" r="5"/></g></svg>'); background-size:40px 40px; background-repeat:repeat; }
    #guestbookForm button{ align-self:center; margin-top:6px; }
    .gb-status{ margin-top:8px; text-align:center; font-size:.95rem; color:var(--muted); }

  </style>
</head>
<body>
  <div id="bg-wrap"><img id="bgImage" src="background.jpg" alt="" onerror="if(this.src.includes('background.jpg')){this.src='background.png';}else{this.parentNode.style.display='none';}"></div>
  <div id="petals"></div>
  <div class="container">
    <span class="orn corner-tl"></span>
    <span class="orn corner-tr"></span>
    <span class="orn corner-bl"></span>
    <span class="orn corner-br"></span>
    <img id="logo" class="logo" src="logo.png" alt="Nunta Diana & Geo" onerror="this.style.display='none'" />
    <div class="festive-title">Diana &amp; Geo</div>
    <div class="wedding-date">17.08.2025</div>
    <div id="countdown" class="countdown"></div>
    <div class="subtitle">Vă mulțumim că ați ales să participați la evenimentul nostru!</div>

    <figure class="couple-wrap">
      <div class="slideshow" id="slideshow">
        <button class="slide-nav prev" type="button" aria-label="Fotografia anterioară">‹</button>
        <button class="slide-nav next" type="button" aria-label="Fotografia următoare">›</button>
        <div class="dots" id="slideDots" aria-label="Navigare slideshow"></div>
        <noscript><img class="couple" src="couple.jpg" alt="Diana & Geo — la starea civilă" /></noscript>
      </div>
    </figure>

    <div class="note">Formularul permite <strong>încărcarea de fotografii sau video</strong>. Numărul mesei va fi disponibil și fizic, la locație.</div>

    <div class="actions">
      <a href="https://forms.gle/Ji3SCJTNThM8GApL7" target="_blank" class="action-btn">Încarcă foto/video</a>
      <a href="meniu.html" class="action-btn">Meniu</a>
      <button id="addressBtn" class="action-btn outline" type="button">Vezi adresa & program</button>
      <button id="contactBtn" class="action-btn outline" type="button">Contactează-ne</button>
    </div>

    <div id="addressBox" class="reveal-box" hidden>
      <div class="section-title"><strong>Biserica cu Lună</strong> – Catedrala Veche „Adormirea Maicii Domnului”</div>
      Piața Unirii 2, Oradea<br>
      <div class="map-buttons">
        <a href="https://www.google.com/maps/place/Catedrala+Veche+%E2%80%9EAdormirea+Maicii+Domnului%E2%80%9D/@47.0536688,21.9262691,17z/data=!3m1!4b1!4m6!3m5!1s0x474647e88cf224c3:0x107c4b90413fd607!8m2!3d47.0536652!4d21.9288494!16s%2Fg%2F120_l_yn?hl=ro&entry=ttu&g_ep=EgoyMDI1MDgwNi4wIKXMDSoASAFQAw%3D%3D" target="_blank" rel="noopener" class="mini-btn outline">Google Maps</a>
        <a href="https://waze.com/ul?ll=47.0536652,21.9288494&navigate=yes" target="_blank" rel="noopener" class="mini-btn waze" aria-label="Deschide ruta în Waze (Biserica cu Lună)"><svg class="ico" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 48" aria-hidden="true"><path d="M44 6c8 0 14 6 14 14s-6 14-14 14H24c-3 5-8 8-14 8 5-3 8-7 9-12C13 26 8 22 8 16 8 9 14 6 20 6h24z" fill="currentColor"/><circle cx="26" cy="38" r="4" fill="currentColor"/><circle cx="38" cy="38" r="4" fill="currentColor"/></svg>Waze</a>
      </div>
      <span class="time"><em>Cununia religioasă la <strong>14:30</strong>.</em></span>
      <hr>
      <div class="section-title"><strong>Emerald, Salon Cristal (sala mică)</strong></div>
      Strada Ovid Densușeanu 78/A, Oradea 410237<br>
      <div class="map-buttons">
        <a href="https://www.google.com/maps/place//data=!4m2!3m1!1s0x4746464a64cf0d93:0xb02b6084693f8d5d?sa=X&ved=1t:8290&ictx=111" target="_blank" rel="noopener" class="mini-btn outline">Google Maps</a>
        <a href="https://waze.com/ul?q=Strada%20Ovid%20Densu%C8%99eanu%2078%2FA%2C%20Oradea%20410237&navigate=yes" target="_blank" rel="noopener" class="mini-btn waze" aria-label="Deschide ruta în Waze (Emerald, Salon Cristal)"><svg class="ico" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 48" aria-hidden="true"><path d="M44 6c8 0 14 6 14 14s-6 14-14 14H24c-3 5-8 8-14 8 5-3 8-7 9-12C13 26 8 22 8 16 8 9 14 6 20 6h24z" fill="currentColor"/><circle cx="26" cy="38" r="4" fill="currentColor"/><circle cx="38" cy="38" r="4" fill="currentColor"/></svg>Waze</a>
      </div>
      <span class="time"><em>Petrecerea începe la <strong>16:00</strong>.</em></span>
    </div>

    <div id="contactBox" class="reveal-box" hidden>Georgian: 0754706716 &nbsp;&bull;&nbsp; Diana: 0748436309</div>

    <input type="text" id="search" placeholder="Căutați masa după orice parte din nume (cu sau fără diacritice)..." autofocus autocomplete="off" />
    <div class="count" id="count"></div>
    <div class="results" id="results"></div>

    <div id="guestbook" class="guestbook">
      <h3 class="guest-title">Lasă un mesaj mirilor!</h3>
      <form id="guestbookForm">
        <input type="text" id="gbName" placeholder="Numele tău" required>
        <textarea id="gbMessage" placeholder="Mesajul tău" required></textarea>
        <button type="submit" class="action-btn">Trimite</button>
      </form>
      <div id="guestbookStatus" class="gb-status" aria-live="polite"></div>
    </div>

    <!-- QUIZ PREVIEW - sub lista cu căutarea -->
    <div id="quiz-box" class="quiz-box" role="region" aria-label="Quiz preview">
      <h3 class="quiz-title">QUIZ GAME - Cât de bine cunoști mirii?</h3>
      <p class="quiz-q">Ce animal au Diana&Geo?</p>
      <form id="quizForm">
        <label class="quiz-opt"><input type="radio" name="qAnimal" value="a"> a) Porc vietnamez</label>
        <label class="quiz-opt"><input type="radio" name="qAnimal" value="b"> b) Pisică</label>
        <label class="quiz-opt"><input type="radio" name="qAnimal" value="c"> c) Carpen japonez</label>
        <label class="quiz-opt"><input type="radio" name="qAnimal" value="d"> d) Câine</label>
      </form>
      <div class="quiz-actions">
        <a class="mini-btn" href="quiz.html">Continuă</a>
      </div>
    </div>

    <div class="floral-divider bottom"></div>
  </div>

  <script>
    // Petals generator
    (function(){
      const wrap = document.getElementById('petals'); if (!wrap) return; const COUNT = 22;
      for (let i=0;i<COUNT;i++){ const p=document.createElement('span'); p.className='petal'; p.style.left=(Math.random()*100).toFixed(2)+'vw'; p.style.setProperty('--delay',(Math.random()*10).toFixed(2)+'s'); p.style.setProperty('--dur',(12+Math.random()*10).toFixed(2)+'s'); p.style.opacity=(0.6+Math.random()*0.4).toFixed(2); wrap.appendChild(p);} })();

    // Slideshow
    function setupSlideshow(){
      const host=document.getElementById('slideshow'); if(!host) return;
      const bases=['couple','couple1','couple2','couple3','couple4'];
      for(let i=bases.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [bases[i],bases[j]]=[bases[j],bases[i]]; }
      const slides=[]; bases.forEach(name=>{ const img=new Image(); img.alt='Diana & Geo'; img.decoding='async'; img.loading='eager'; img.src=name+'.jpg'; img.onerror=function(){ if(img.src.endsWith('.jpg')) img.src=name+'.png'; else { img.dataset.skip='1'; } }; const slide=document.createElement('div'); slide.className='slide'; slide.appendChild(img); host.appendChild(slide); slides.push(slide); });
      const dotsWrap=document.getElementById('slideDots'); const prevBtn=host.querySelector('.slide-nav.prev'); const nextBtn=host.querySelector('.slide-nav.next');
      setTimeout(()=>{
        const valid=slides.filter(s=>!s.querySelector('img').dataset.skip);
        if(valid.length===0){ const img=document.createElement('img'); img.src='couple.jpg'; img.alt='Diana & Geo'; const s=document.createElement('div'); s.className='slide active'; s.appendChild(img); host.innerHTML=''; host.appendChild(s); return; }
        if(valid.length===1){ valid[0].classList.add('active'); prevBtn.style.display='none'; nextBtn.style.display='none'; dotsWrap.style.display='none'; return; }
        dotsWrap.innerHTML=''; valid.forEach((_,i)=>{ const d=document.createElement('button'); d.type='button'; d.className='dot'; d.setAttribute('aria-label','Du-te la fotografia '+(i+1)); d.addEventListener('click',()=>{ stopTimer(); setActive(i); startTimer(); }); dotsWrap.appendChild(d); });
        let idx=0; function setActive(i){ valid[idx].classList.remove('active'); dotsWrap.children[idx].classList.remove('active'); idx=(i+valid.length)%valid.length; valid[idx].classList.add('active'); dotsWrap.children[idx].classList.add('active'); }
        valid[0].classList.add('active'); dotsWrap.children[0].classList.add('active');
        const INTERVAL=9000; let timer=null; function next(){ setActive(idx+1); } function prev(){ setActive(idx-1); } function startTimer(){ if(timer){ clearInterval(timer);} timer=setInterval(()=>next(),INTERVAL);} function stopTimer(){ if(timer){ clearInterval(timer); timer=null; } }
        startTimer(); nextBtn.addEventListener('click',()=>{ stopTimer(); next(); startTimer(); }); prevBtn.addEventListener('click',()=>{ stopTimer(); prev(); startTimer(); }); host.addEventListener('mouseenter', stopTimer); host.addEventListener('mouseleave', startTimer);
      },300);
    }

    // ===== Lista invitați (actualizată) =====
    const defaultGuests = [ /*BEGIN_GUESTS*/
  // PREZIDIU (nași)
  {"Nume":"Bolojan Sergiu","Masa":null,"Prezidiu":true},
  {"Nume":"Roxana","Masa":null,"Prezidiu":true},
  {"Nume":"Andrei","Masa":null,"Prezidiu":true},
  {"Nume":"Matei","Masa":null,"Prezidiu":true},
  {"Nume":"Dreana Răzvan","Masa":null,"Prezidiu":true},
  {"Nume":"Patricia","Masa":null,"Prezidiu":true},
  {"Nume":"Anastasia","Masa":null,"Prezidiu":true},
  {"Nume":"Alma","Masa":null,"Prezidiu":true},
  {"Nume":"Alexandru","Masa":null,"Prezidiu":true},

  // MASA 1 (13)
  {"Nume":"Marchiș Ionuț","Masa":1},
  {"Nume":"Tisăliță Grațian","Masa":1},
  {"Nume":"Anuța","Masa":1},
  {"Nume":"Natalia","Masa":1},
  {"Nume":"Sofia","Masa":1},
  {"Nume":"Șuștic Maria","Masa":1},
  {"Nume":"Mîrza Gheorge","Masa":1},
  {"Nume":"Rozalia","Masa":1},
  {"Nume":"Mîrza Oana","Masa":1},
  {"Nume":"Tomoiagă Adrian","Masa":1},
  {"Nume":"Denisa","Masa":1},
  {"Nume":"Hotima Alin","Masa":1},
  {"Nume":"Ioana","Masa":1},

  // MASA 2 (10)
  {"Nume":"Godja Andreea","Masa":2},
  {"Nume":"Pintea Crina","Masa":2},
  {"Nume":"Godja Andrei","Masa":2},
  {"Nume":"Adela","Masa":2},
  {"Nume":"Opriș Anamaria","Masa":2},
  {"Nume":"Laurențiu","Masa":2},
  {"Nume":"Ulici Denisa","Masa":2},
  {"Nume":"Marian","Masa":2},
  {"Nume":"Mariș Alina","Masa":2},
  {"Nume":"Beniamin","Masa":2},

  // MASA 3 (10)
  {"Nume":"Tivadar Ioniță","Masa":3},
  {"Nume":"Verdeș Viorel","Masa":3},
  {"Nume":"Irina","Masa":3},
  {"Nume":"Dunca Nuțu","Masa":3},
  {"Nume":"Ileana","Masa":3},
  {"Nume":"Tomșa Lică","Masa":3},
  {"Nume":"Andreica Mihai","Masa":3},
  {"Nume":"Ana","Masa":3},
  {"Nume":"Crăciun Ioan","Masa":3},
  {"Nume":"Ileana","Masa":3},

  // MASA 4 (9)
  {"Nume":"Roman Dorin","Masa":4},
  {"Nume":"Anisie","Masa":4},
  {"Nume":"Gabriel","Masa":4},
  {"Nume":"Pop Sorin","Masa":4},
  {"Nume":"Mariana","Masa":4},
  {"Nume":"Pop Mihai","Masa":4},
  {"Nume":"Natalia","Masa":4},
  {"Nume":"Ivașco Maria","Masa":4},
  {"Nume":"Gabriel","Masa":4},

  // MASA 5 (8)
  {"Nume":"Husti Marcel","Masa":5, "Parinte":true},
  {"Nume":"Margareta","Masa":5, "Parinte":true},
  {"Nume":"Filip Crina","Masa":5},
  {"Nume":"Ionel","Masa":5},
  {"Nume":"Tudor","Masa":5},
  {"Nume":"Petrar Dorina","Masa":5},
  {"Nume":"Flontaș Mirela","Masa":5},
  {"Nume":"Eva","Masa":5},

  // MASA 6 (10)
  {"Nume":"Dunca Ștefan","Masa":6, "Parinte":true},
  {"Nume":"Maria","Masa":6, "Parinte":true},
  {"Nume":"Mândru Adrian","Masa":6},
  {"Nume":"Iustina","Masa":6},
  {"Nume":"Claudiu","Masa":6},
  {"Nume":"Sebastian","Masa":6},
  {"Nume":"Roșca Ion","Masa":6},
  {"Nume":"Ileana","Masa":6},
  {"Nume":"Aurora","Masa":6},
  {"Nume":"Roșca Andreea","Masa":6},

  // MASA 7 (7)
  {"Nume":"Jiurge Mircea","Masa":7},
  {"Nume":"Camelia","Masa":7},
  {"Nume":"Jiurge Mircea și Andreea","Masa":7},
  {"Nume":"Jiurge Mihai","Masa":7},
  {"Nume":"Cristina","Masa":7},
  {"Nume":"Jiurge Maria","Masa":7},

  // MASA 8 (9)
  {"Nume":"Stevlik Sandor","Masa":8},
  {"Nume":"Letiția","Masa":8},
  {"Nume":"Tăut Florin","Masa":8},
  {"Nume":"Lăcrimioara","Masa":8},
  {"Nume":"Csaki Călin","Masa":8},
  {"Nume":"Ani","Masa":8},
  {"Nume":"Drăgan Mihai","Masa":8},
  {"Nume":"Noemi","Masa":8},
  {"Nume":"Roș Mircea","Masa":8},

  // MASA 9 (12)
  {"Nume":"Ioan Cristian","Masa":9},
  {"Nume":"Gîțan Dan","Masa":9},
  {"Nume":"Bratu Șerban","Masa":9},
  {"Nume":"Iuga Mihai","Masa":9},
  {"Nume":"Teodora","Masa":9},
  {"Nume":"Ilișoi Daniel","Masa":9},
  {"Nume":"Anca","Masa":9},
  {"Nume":"Filip","Masa":9},
  {"Nume":"Iuraș Ariadna","Masa":9},
  {"Nume":"Emilian","Masa":9},
  {"Nume":"Rusu Cosmin","Masa":9},
  {"Nume":"Georgiana","Masa":9},

  // MASA 10 (10)
  {"Nume":"Pașca Adrian","Masa":10},
  {"Nume":"Bianca","Masa":10},
  {"Nume":"Matache Alexandru","Masa":10},
  {"Nume":"Priscilla","Masa":10},
  {"Nume":"Drăgan Patricia","Masa":10},
  {"Nume":"George","Masa":10},
  {"Nume":"Negrău Andrei","Masa":10},
  {"Nume":"Lia","Masa":10},
  {"Nume":"Berche George","Masa":10},
  {"Nume":"Ioana","Masa":10},

  // MASA 11 (10)
  {"Nume":"Ciavoi Mylan","Masa":11},
  {"Nume":"Gabriela","Masa":11},
  {"Nume":"Hercuț Sergiu","Masa":11},
  {"Nume":"Adela","Masa":11},
  {"Nume":"Petruș Dana","Masa":11},
  {"Nume":"Florin","Masa":11},
  {"Nume":"Fițigău Firuța","Masa":11},
  {"Nume":"Ovidiu","Masa":11},
  {"Nume":"Bizău Florica","Masa":11},
  {"Nume":"Sorin","Masa":11}
/*END_GUESTS*/ ];

    let guests = defaultGuests.slice();

    // ==== Grupare insoțitori pe o singură linie ====
    function isSingleTokenName(name){
      const t = (name || '').trim().split(' ').filter(Boolean);
      return t.length === 1;
    }
    function buildGroups(list){
      const byTable = new Map();
      list.forEach(g=>{
        const key = (g.Masa==null? 'PREZ' : String(g.Masa));
        if(!byTable.has(key)) byTable.set(key, []);
        byTable.get(key).push(g);
      });
      const groups = [];
      for(const [key, arr] of byTable.entries()){
        let current = null;
        for(let i=0;i<arr.length;i++){
          const person = arr[i];
          const single = isSingleTokenName(person.Nume);
          if(!current){
            current = { Masa: person.Masa, Prezidiu: !!person.Prezidiu, Parinte: !!person.Parinte, members:[person] };
            groups.push(current);
          } else if(single){
            current.members.push(person);
            current.Prezidiu = current.Prezidiu || !!person.Prezidiu;
            current.Parinte = current.Parinte || !!person.Parinte;
          } else {
            current = { Masa: person.Masa, Prezidiu: !!person.Prezidiu, Parinte: !!person.Parinte, members:[person] };
            groups.push(current);
          }
        }
      }
      groups.sort((a,b)=> ((a.Masa==null?99:a.Masa) - (b.Masa==null?99:b.Masa)) || a.members[0].Nume.localeCompare(b.members[0].Nume));
      return groups;
    }
    let grouped = buildGroups(guests);
    function groupsFromIndividuals(individuals){
      const set = new Set(individuals.map(p=>p.Nume));
      const out = [];
      const added = new Set();
      grouped.forEach(gr=>{
        if(gr.members.some(m=> set.has(m.Nume))){
          const key = (gr.Masa==null? 'PREZ' : String(gr.Masa)) + '|' + gr.members.map(m=>m.Nume).join('|');
          if(!added.has(key)){ added.add(key); out.push(gr); }
        }
      });
      return out;
    }

    // UI search
    const resultsDiv=document.getElementById('results');
    const countDiv=document.getElementById('count');
    const searchInput=document.getElementById('search');

    function formatNames(arr){
      if(!arr || arr.length===0) return '';
      if(arr.length===1) return arr[0];
      if(arr.length===2) return arr.join(' și ');
      return arr.slice(0,-1).join(', ') + ' și ' + arr[arr.length-1];
    }

    function renderResults(groups){
      resultsDiv.innerHTML = '';
      countDiv.textContent = '';
      if(!Array.isArray(groups) || groups.length===0) return;
      groups.forEach(gr=>{
        const row = document.createElement('div');
        row.className = 'result-row';
        const label = gr.Prezidiu ? 'Prezidiu' : 'Masa ' + gr.Masa;
        const nameCombined = formatNames(gr.members.map(m => m.Nume));
        row.innerHTML = `
          <span class="guest-name${gr.Prezidiu ? ' godparent' : ''}${gr.Parinte ? ' parent' : ''}">
            ${gr.Prezidiu ? '<span class="badge-nas"><span class="star"></span>NAȘ</span>' : ''}
            ${gr.Parinte ? '<span class="badge-parinte">PĂRINTE</span>' : ''}
            ${nameCombined}
          </span>
          <span class="guest-table">${label}</span>`;
        resultsDiv.appendChild(row);
      });
      countDiv.textContent = groups.length + ' grupuri afișate';
    }

    function filterList(term){
      function toKey(s){ return (s||'').toLowerCase().normalize('NFD').replace(/[̀-ͯ]/g,'').replace(/[șş]/g,'s').replace(/[țţ]/g,'t').replace(/[^a-z0-9 ]+/g,' ').replace(/  +/g,' ').trim(); }
      const key=toKey(term); if(!key) return [];
      return guests.filter(g=>toKey(g.Nume).includes(key)).sort((a,b)=> ((a.Masa||99)-(b.Masa||99)) || a.Nume.localeCompare(b.Nume));
    }

    function startCountdown(){
      const el=document.getElementById('countdown');
      if(!el) return;
      const target=new Date('2025-08-17T16:00:00');
      let timer;
      function update(){
        const now=new Date();
        const diff=target-now;
        if(diff<=0){
          el.textContent='A început!';
          clearInterval(timer);
          return;
        }
        const d=Math.floor(diff/86400000);
        const h=Math.floor(diff/3600000)%24;
        const m=Math.floor(diff/60000)%60;
        const s=Math.floor(diff/1000)%60;
        el.textContent=`${d} zile ${h} ore ${m} min ${s} sec`;
      }
      update();
      timer=setInterval(update,1000);
    }

    // Toggles
    const addressBtn=document.getElementById('addressBtn');
    const contactBtn=document.getElementById('contactBtn');
    const addressBox=document.getElementById('addressBox');
    const contactBox=document.getElementById('contactBox');
    addressBtn.addEventListener('click',()=>{ addressBox.hidden=!addressBox.hidden; });
    contactBtn.addEventListener('click',()=>{ contactBox.hidden=!contactBox.hidden; });

    // Init
    window.onload = ()=>{
      document.getElementById('search').focus();
      setupSlideshow();
      grouped = buildGroups(guests);
      startCountdown();
    };
    searchInput.addEventListener('input', ()=>{
      const term = searchInput.value;
      if(term.trim() === ''){ resultsDiv.innerHTML=''; countDiv.textContent=''; return; }
      const individuals = filterList(term);
      const filteredGroups = groupsFromIndividuals(individuals);
      if(filteredGroups.length === 0){ resultsDiv.innerHTML='<div class="no-result">Nu există invitat cu acest nume.</div>'; countDiv.textContent=''; return; }
      renderResults(filteredGroups);
    });

    // ===== Guestbook submission =====
    (function(){
      const form = document.getElementById('guestbookForm');
      if(!form) return;
      const status = document.getElementById('guestbookStatus');
      const API_URL = 'https://script.google.com/macros/s/AKfycbxVtoWHvFhKGDCgkBeVd8l2s4YwrQzP_XfnWwpG_G6EXDL3SZYsqK7h7K9IOFBDNJTh/exec';
      const API_KEY = '1897897123ahuiuasd987';
      form.addEventListener('submit', async e => {
        e.preventDefault();
        status.textContent = 'Se trimite...';
        const payload = {
          apiKey: API_KEY,
          name: document.getElementById('gbName').value.trim(),
          message: document.getElementById('gbMessage').value.trim()
        };
        try {
          const res = await fetch(API_URL, {
            method: 'POST',
            headers: {
              'Content-Type': 'text/plain'
            },
            body: JSON.stringify(payload)
          });
          const data = await res.json();
          if(data && data.ok){
            status.textContent = 'Mulțumim pentru mesaj!';
            form.reset();
          } else {
            status.textContent = 'Eroare la trimitere.';
          }
        } catch(err){
          status.textContent = 'Eroare la trimitere.';
        }
      });
    })();

    // ===== Mini self-tests (in consolă) =====
    (function selfTests(){
      try{
        const ariadna = filterList('Iuras').some(p=>/Iuraș Ariadna/i.test(p.Nume));
        console.assert(ariadna, 'Test: diacritice tolerant pentru Iuraș');
        const grA = groupsFromIndividuals(filterList('Ariadna'))[0];
        console.assert(grA && grA.members.some(m=>m.Nume==='Emilian'), 'Test: grupare Ariadna + Emilian');
        const g5 = buildGroups(guests).find(g=>g.Masa===5);
        console.assert(g5 && g5.Parinte===true, 'Test: badge părinți masa 5');
      }catch(e){ console.warn('Self-tests skipped:', e); }
    })();

    // ===== Quiz preview behavior =====
    (function(){
      const ctn = document.getElementById('quizContinue');
      if(!ctn) return;
      ctn.addEventListener('click', function(e){
        const chosen = document.querySelector('input[name="qAnimal"]:checked');
        if(!chosen){
          e.preventDefault();
          alert('Te rog alege un răspuns.');
          return;
        }
        const url = 'quiz.html?qid=animal&a=' + encodeURIComponent(chosen.value);
        this.setAttribute('href', url);
      });
    })();
  </script>
</body>
</html>
